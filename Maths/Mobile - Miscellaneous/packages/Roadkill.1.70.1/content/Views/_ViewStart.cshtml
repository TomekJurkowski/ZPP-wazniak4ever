@using Roadkill.Core.Configuration;
@{
	// ViewStart does not inherit from the RoadkillView, as it's outside of MVC (it's the ASP.NET Masterpage system).
	// So get the controller from context instead.
	Roadkill.Core.Mvc.Controllers.ControllerBase controller = this.ViewContext.Controller as Roadkill.Core.Mvc.Controllers.ControllerBase;
	ApplicationSettings applicationSettings = controller.ApplicationSettings;

	if (applicationSettings.Installed && !applicationSettings.UpgradeRequired)
	{
		SiteSettings siteSettings = controller.SiteSettingsManager.GetSiteSettings();
		Layout = siteSettings.ThemePath + "/Theme.cshtml";
	}
}