var Roadkill;(function(n){(function(n){(function(n){var t=function(){function t(){}return t.configure=function(){var t,i;this.initializeImagePreview(),this.initializeFileUpload(),t=new n.ButtonEvents,t.bind(),i=new n.TableEvents,i.bind(),n.TableEvents.update("/")},t.initializeImagePreview=function(){var t=20,i=20;$("table#files tr[data-itemtype=file]").live("mouseenter",function(r){var f,u;(f=$("td.filetype",this).text(),f.search(/^(jpg|png|gif)$/i)!=-1)&&(u=ROADKILL_ATTACHMENTSPATH+n.TableEvents.getCurrentPath()+"/",u=u.replace("//","/")+$("td.file",this).text(),$("body").append("<p id='image-preview'><img src='"+u+"' alt='Image Preview' /><\/p>"),$("#image-preview").css("top",r.pageY-t+"px").css("left",r.pageX+i+"px").fadeIn("fast"))}).live("mouseleave",function(){$("#image-preview").remove()}).live("mousemove",function(n){$("#preview").css("top",n.pageY-t+"px").css("left",n.pageX+i+"px")})},t.initializeFileUpload=function(){$("#fileupload").fileupload({dropZone:$("#folder-container"),pasteZone:$("body"),dataType:"json",progressall:function(n,t){$("#progress").show();var i=t.loaded/t.total*100+"",r=parseInt(i,10);$("#progress .bar").css("width",r+"%")},done:function(t,i){if($("#progress").hide(),i.result.status=="error"){toastr.error(i.result.message);return}toastr.success(i.result.filename+" uploaded successfully."),n.TableEvents.update("",!1),setTimeout(function(){$("#progress div.bar").css("width","0%")},2e3)}}).bind("fileuploaddrop",function(){n.TableEvents.update("",!1)})},t}();n.Setup=t})(n.FileManager||(n.FileManager={}));var t=n.FileManager})(n.Site||(n.Site={}));var t=n.Site})(Roadkill||(Roadkill={}))